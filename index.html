<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ic</title>
    <style>
        @font-face { font-family: 'Miso'; src: local('Miso'), url('miso.ttf'); }
        body { 
            margin: 0; background: #000; overflow: hidden; font-family: 'Miso', sans-serif; 
            user-select: none; -webkit-user-select: none; cursor: none;
        }
        body.show-cursor { cursor: default; }

        #video-container { position: absolute; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 1; }
        video { width: 100%; height: 100%; object-fit: cover; }

        /* HOT ZONE */
        #top-hotzone { position: absolute; top: 0; left: 0; width: 100%; height: 50px; z-index: 200; }

        /* INPUT UI */
        #ui-overlay { position: absolute; top: 0; left: 0; z-index: 10; display: none; width: fit-content; }

        .focusable-wrapper { 
            display: inline-block; padding: 18px 120px 18px 45px; position: relative; 
            /* Updated Gradient: 90% -> 50% -> 0% */
            background: linear-gradient(to right, 
                rgba(0, 0, 0, 0.9) 0%, 
                rgba(0, 0, 0, 0.5) 50%, 
                rgba(0, 0, 0, 0) 100%
            );
            -webkit-clip-path: polygon(0% 0%, 100% 0%, 95% 100%, 0% 100%);
        }

        /* SELECTION - Instant color swap */
        #ui-overlay.is-selected .focusable-wrapper { background: transparent; }
        #ui-overlay.is-selected .focusable-wrapper::before {
            content: ""; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background: #ff007f; z-index: -2;
            clip-path: polygon(0% 0%, 100% 0%, 95% 100%, 0% 100%);
        }
        #ui-overlay.is-selected .focusable-wrapper::after {
            content: ""; position: absolute; top: 5px; left: 5px; right: 5px; bottom: 5px;
            background: #000; z-index: -1;
            clip-path: polygon(0% 0%, 100% 0%, 95% 100%, 0% 100%);
        }
        
        #input-name { color: white; font-size: 54px; margin: 0; text-transform: uppercase; letter-spacing: 4px; }

        /* MOD MENU BUTTON - Position Adjusted Lower */
        #menu-btn {
            position: absolute; 
            bottom: 25px; /* Moved down from 40px */
            left: 40px; 
            width: 75px; height: 75px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 50%; z-index: 15;
            display: none; align-items: center; justify-content: center;
            cursor: pointer; overflow: hidden; border: none;
            transition: none;
        }

        .btn-placeholder {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: #222 url('https://via.placeholder.com/150/222222/ff007f?text=MOD') no-repeat center/cover;
            opacity: 0.4; z-index: -1;
        }

        #menu-btn.is-selected { 
            background: #ff007f !important; 
            transform: none !important;
        }
        
        #menu-btn svg { width: 35px; height: 35px; fill: white; }

        /* MOD MENU */
        #mod-menu {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 350px; background: rgba(10, 10, 10, 0.98); border: 2px solid #ff007f;
            color: white; z-index: 100; display: none; padding: 25px;
        }
        .menu-item { padding: 15px; display: flex; align-items: center; border: 2px solid transparent; margin-top: 10px; font-size: 20px; }
        .menu-item.focused { border-color: #ff007f; background: rgba(255, 0, 127, 0.2); }
        .checkbox { width: 22px; height: 22px; border: 2px solid white; margin-right: 15px; display: flex; align-items: center; justify-content: center; }
        .checkbox.checked { background: #4CAF50; border: 2px solid #4CAF50; }
        .checkbox.checked::after { content: "âœ“"; font-size: 16px; color: white; }
    </style>
</head>
<body onclick="handleGlobalClick()">

    <div id="top-hotzone"></div>

    <div id="video-container">
        <video id="tv-player" autoplay muted loop src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4"></video>
    </div>

    <div id="ui-overlay">
        <div class="focusable-wrapper" id="banner-hitbox">
            <h1 id="input-name">HDMI 1</h1>
        </div>
    </div>

    <div id="menu-btn">
        <div class="btn-placeholder"></div>
        <svg viewBox="0 0 24 24"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
    </div>

    <div id="mod-menu">
        <h2 style="text-align:center; color:#ff007f; margin:0 0 20px 0;">SYSTEM MODS</h2>
        <div class="menu-item focused" id="lock-item">
            <div class="checkbox" id="banner-check"></div>
            <span>Make Banner Disappear</span>
        </div>
    </div>

    <script>
        const ui = document.getElementById('ui-overlay');
        const btn = document.getElementById('menu-btn');
        const menu = document.getElementById('mod-menu');
        const label = document.getElementById('input-name');
        const check = document.getElementById('banner-check');
        const hotzone = document.getElementById('top-hotzone');

        const inputs = ["HDMI 1", "HDMI 2", "HDMI 3", "HDMI 4", "AV 1", "AV 2", "COMP 1", "LIVE TV"];
        let idx = 0;
        let isLocked = false;
        let focusState = "none";
        let hotzoneTimer;

        function updateDisplay() {
            ui.classList.toggle('is-selected', focusState === 'banner');
            btn.classList.toggle('is-selected', focusState === 'button');
        }

        function toggleModLock() {
            isLocked = !isLocked;
            check.classList.toggle('checked', isLocked);
            if (isLocked) {
                ui.style.display = 'none';
                btn.style.display = 'none';
            } else {
                ui.style.display = 'block';
                btn.style.display = 'flex';
            }
        }

        function handleGlobalClick() {
            if (!document.fullscreenElement) document.documentElement.requestFullscreen().catch(e => {});
            if (menu.style.display === 'block') return;

            if (ui.style.display === 'block') {
                ui.style.display = 'none';
                btn.style.display = 'none';
                focusState = "none";
            } else if (!isLocked) {
                ui.style.display = 'block';
                btn.style.display = 'flex';
                focusState = "none";
            }
            updateDisplay();
        }

        hotzone.addEventListener('mouseenter', () => {
            clearTimeout(hotzoneTimer);
            hotzoneTimer = setTimeout(() => {
                if (isLocked) return;
                if (ui.style.display === 'block') {
                    ui.style.display = 'none';
                    btn.style.display = 'none';
                    focusState = "none";
                } else {
                    ui.style.display = 'block';
                    btn.style.display = 'flex';
                }
                updateDisplay();
            }, 1500);
        });

        hotzone.addEventListener('mouseleave', () => clearTimeout(hotzoneTimer));

        window.addEventListener('keydown', (e) => {
            if (e.keyCode === 33) { 
                idx = (idx - 1 + inputs.length) % inputs.length;
                label.innerText = inputs[idx];
                if (!isLocked) { ui.style.display = 'block'; btn.style.display = 'flex'; }
                return;
            }
            if (e.keyCode === 34) { 
                idx = (idx + 1) % inputs.length;
                label.innerText = inputs[idx];
                if (!isLocked) { ui.style.display = 'block'; btn.style.display = 'flex'; }
                return;
            }

            if ([37, 38, 39, 40].includes(e.keyCode)) e.preventDefault();

            if (e.keyCode === 399) {
                menu.style.display = (menu.style.display === 'block') ? 'none' : 'block';
                return;
            }

            if (menu.style.display === 'block') {
                if (e.keyCode === 13) toggleModLock();
                return;
            }

            switch(e.keyCode) {
                case 13:
                    if (focusState === "button") menu.style.display = 'block';
                    else handleGlobalClick();
                    break;
                case 38: // UP
                    if (!isLocked) {
                        ui.style.display = 'block';
                        btn.style.display = 'flex';
                        focusState = "banner";
                    }
                    break;
                case 40: // DOWN
                    if (!isLocked) {
                        if (ui.style.display === 'none') btn.style.display = 'flex';
                        focusState = "button";
                    }
                    break;
                case 39: case 37:
                    if (focusState === "banner") {
                        idx = (e.keyCode === 39) ? (idx + 1) % inputs.length : (idx - 1 + inputs.length) % inputs.length;
                        label.innerText = inputs[idx];
                    }
                    break;
            }
            updateDisplay();
        });

        document.getElementById('banner-hitbox').addEventListener('mouseenter', () => {
            if (ui.style.display === 'block') { focusState = "banner"; updateDisplay(); }
        });
        btn.addEventListener('mouseenter', () => {
            if (btn.style.display === 'flex') { focusState = "button"; updateDisplay(); }
        });

        let cTimer;
        document.addEventListener('mousemove', () => {
            document.body.classList.add('show-cursor');
            clearTimeout(cTimer);
            cTimer = setTimeout(() => document.body.classList.remove('show-cursor'), 2000);
        });
    </script>
</body>
</html>
